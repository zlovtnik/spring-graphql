spring:
  application:
    name: ssf
  datasource:
    url: jdbc:oracle:thin:@//${ORACLE_HOST:localhost}:${ORACLE_PORT:1521}/${ORACLE_DB:FREEPDB1}
    driver-class-name: oracle.jdbc.OracleDriver
    username: ${ORACLE_USER:ssfuser}
    password: ${ORACLE_PASSWORD:ssfuser}
    hikari:
      connection-timeout: 30000
      maximum-pool-size: 20
      minimum-idle: 5
      auto-commit: true
      validation-timeout: 5000
      leak-detection-threshold: 60000
      max-lifetime: 1800000
      idle-timeout: 600000
      connection-test-query: SELECT 1 FROM DUAL
      data-source-properties:
        oracle.jdbc.fanEnabled: true
        oracle.jdbc.fastConnectionFailover: true
        oracle.net.CONNECT_TIMEOUT: 10000
        oracle.net.READ_TIMEOUT: 60000
        oracle.jdbc.implicitStatementCacheSize: 25
        oracle.jdbc.maxCachedBufferSize: 65536
  jpa:
    database-platform: org.hibernate.dialect.OracleDialect
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.OracleDialect
        jdbc:
          batch_size: 100
          fetch_size: 50
  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=500,expireAfterWrite=10m,recordStats
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD}
      timeout: 2000ms
      database: 0

server:
  port: 8443
  ssl:
    key-store: classpath:keystore.p12
    key-store-password: ${KEYSTORE_PASSWORD:changeit}
    key-store-type: PKCS12
    key-alias: ssf

app:
  jwt:
    secret: ${JWT_SECRET}
  security:
    enable-default-user-role: false  # Least-privilege: no implicit roles unless explicitly enabled
  minio:
    url: http://localhost:9000
    access-key: ${MINIO_ACCESS_KEY}
    secret-key: ${MINIO_SECRET_KEY}

management:
  endpoints:
    web:
      exposure:
        include: ${MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE:health,metrics}
  endpoint:
    health:
      show-details: when-authorized
